import{d as B,j as V,E as T,r as f,H as b,c,e as l,f as d,F as y,K as x,O as k,M as g,i as w,k as S,h as $}from"./vendor.d599f415.js";import{u as C}from"./binance_socket.d09b3971.js";const D={class:"flex"},j={class:"order-book overflow-auto"},F={class:"text-slate-300"},I=d("hr",{class:"my-2"},null,-1),O={class:"text-slate-300"},R=B({setup(E){const v=V(),u=C(),p=v.params.id;u.connectToTickerStream(p.toLowerCase()),u.fetchDepthSnapShot(p);const{getDepthSnapshot:a}=T(u);let o=f(0),_=f(0);const s=15,n=b(()=>{var i,e,m;let r=(i=a.value.asks)==null?void 0:i.slice(0,s).map(t=>t[1]).sort((t,h)=>t-h);return r&&(o=r[0],_=r[s-1]),(e=a.value.asks)==null||e.slice(0,s).map(t=>{t[2]=10+(t[1]-o)/(_-o)*90}),(m=a.value.asks)==null?void 0:m.slice(0,s).reverse()}),N=b(()=>{var i,e,m;let r=(i=a.value.bids)==null?void 0:i.slice(0,s).map(t=>t[1]).sort((t,h)=>t-h);return r&&(o=r[0],_=r[s-1]),(e=a.value.bids)==null||e.slice(0,s).map(t=>{t[2]=10+(t[1]-o)/(_-o)*90}),(m=a.value.bids)==null?void 0:m.slice(0,s)});return(r,i)=>(c(),l("section",D,[d("div",j,[d("div",null,[(c(!0),l(y,null,x(S(n),e=>(c(),l("p",{class:"text-green-600 m-0.3 text-right",key:e[0],style:k(`background-image: -webkit-linear-gradient(right, rgb(50, 205, 50, 0.2), rgb(50, 205, 50, 0.2) ${e[2]}%, transparent ${e[2]}%)`)},[d("span",F,g(parseFloat(e[0])),1),w(" | "+g(e[1]),1)],4))),128)),I,(c(!0),l(y,null,x(S(N),e=>(c(),l("p",{class:"text-red-500 p-0.3 text-right",key:e[0],style:k(`background-image: -webkit-linear-gradient(right, rgb(255, 69, 0, 0.18), rgb(255, 69, 0, 0.18) ${e[2]}%, transparent ${e[2]}%)`)},[d("span",O,g(parseFloat(e[0])),1),w(" | "+g(e[1]),1)],4))),128))])])]))}});const W={class:"flex"},z=B({setup(E){const u=V().params.id,p="vue-trading-view",a={width:"100%",height:"100%",symbol:`BINANCE:${u}`,interval:"15",timezone:"Europe/Belgrade",theme:"dark",style:"1",locale:"en",toolbar_bg:"#f1f3f6",enable_publishing:!1,hide_side_toolbar:!1,studies:["Volume@tv-basicstudies","VWAP@tv-basicstudies"]};return(s=>{const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://s3.tradingview.com/tv.js",n.onload=s,document.getElementsByTagName("head")[0].appendChild(n)})(()=>{new window.TradingView.widget(Object.assign({container_id:p},a))}),(s,n)=>(c(),l("div",W,[d("section",{id:p}),$(R)]))}});export{z as default};
